// SPDX-License-Identifier: MIT
pragma solidity ^0.8.26;

import {Test, console2 as console, Vm} from "forge-std/Test.sol";
import {UltraVerifier} from "src/verifiers/KYCAge.sol";

contract TestVerify {
    UltraVerifier public verifier;

    constructor(address _verifier) {
        verifier = UltraVerifier(_verifier);
    }

    function verify(bytes memory proof) public view returns (bool) {
        bytes32[] memory publicInputs = new bytes32[](2);
        publicInputs[0] = bytes32(uint256(1729830622));
        publicInputs[1] = bytes32(uint256(1));

        return verifier.verify(proof, publicInputs);
    }
}

contract CounterTest is Test {
    UltraVerifier verifier;
    TestVerify public testVerify;
    Vm.Wallet public owner;
    Vm.Wallet public alice;
    Vm.Wallet public bob;

    function setUp() public {
        owner = vm.createWallet("owner");
        alice = vm.createWallet("alice");
        bob = vm.createWallet("bob");

        verifier = new UltraVerifier();

        testVerify = new TestVerify(address(verifier));
    }

    function test_prove() public view {
        bytes memory proof = vm.parseBytes(
            "0x2406e98003d7b56c9ebcc53be1ff76fc93e0a616858605fecffcd24b2fe830f5108c0db97dd18ca8a7ce779b99b776f489e0a6e6f40dce745355b93f98c39d452c02685d8f2f25351f3c2e13344f4073c289e5404195b6ce9807f90f77068b912e1047743740632c91cde2c69f08052d64e86aaef7485e72b609a1d9fe9525fb1bae471ed8cbec24b3526f616a9e5fde805392a3d73cdaf4011ce71ad5164a0b0f17d616f74fe6f283ff1dbc4f6bf7feb7e64bd495c3986b7f739405c65fd00d15cc2c307019a81084fb8a4909e29d7e49c84bf11eac45e012ddef4256f66c031419e8b8bc796e4301d2352c107b4019dab8df7cbd89a2733c3fb145aa2f3e2d06909dd7d919180b13743863270586770c353e926eceaf864e4a5a617f5d577929f3a9f8a2caaee0f5fd59a633184cc3b45cbf5bd3e6ce20048b2f10ac27a70d19b975d3aa30ab9f6363fba0d28c798d9a1354d11670fea66ff46130e3fc50d319884ec9d488bb42aaab2e542f3bf056f71c2e4359304fa8d120873c5b800fcd0df35260dbccf7e575b34bb3be16cb08ebd7c98e5e1810b07b2438092dfd8dc2210caf28258d7f698106f2ebea750c42a433a0553c269822ee359ca0033577e6110a2ebb0bab02878d257b2c5e87ea0a4adeb98aa76f58c14ea849cfd28a869105e1f60af154d45f7362095370d84eaf128707205ba9a9e9c4428aaf7d166afc233b98032dba3958b802dfefd406cb9bde82b45a30fef04996f1546bee19fff6029cc4d1a07e60ef9f28305e379bc695d77e089db7a246ee157ec123f4daa1762490763898fda2cd26811ba49fc29701dbebed39bc0a3222a34990d9422c6ba707a5f422a31a5badf366e0eb694e36793671b0a40d183c08aa0cb5734e29326b21e250e7530e683fb5d5ca8ad71364ac7de2fb955ac0566041ff2275f912a8982630555d0d5092e16db6a5c946d00ff167104688463798d0ea5d3dba8025c49e04157e0f7b7da164a2ccee8fffb371cbcc49e670397339625c108663b44349032b50a1be8e0c603a54f7a36999d00184310fdbd62df01f5c5db1ee4aa6ec73410d7cd9bec99d5857231982e993972016b7992d0d7cbafa9456dddf8fbc643c962dd7b3645a231d35f3bfc923ae9d5de9a623a0c09defbdf0dd5689447d52cc042f7d76b3e1e154eea7a1a6df5d9324e78ebcd0f916db3fee4bee51e138b8e1820d221c941f827e590eb145a83b06df5270e3928d3879e5c568057e201d51f3df205f27054a70878cfe973080f89c498c2f235f30e2b641bf435719a7a746067e04434b7d38146b2e797f6f5b6b522c31fa5fb2023fa112931a746d44c0dcf89b168c6cb3751ee17b2b209bbc4ea013419e6887bcf7d1de7379cc0a5dd328d72e03fd60a6e1cdc9c519c09fd021876be371e8b587f8e99dc7b64e122b4ff30cf921d2a30d2fae5238c0b0e99a75f01ce26d9ccb9b73bacdad36b20f8cbcbd42c51dd542664de08873a6f049ca5468b0fefbb416137ad12fe58063fd616cca35cc0b463659ba8f70bd95904dde275009a0cf3443de7be8ef39bce6052ee9946b971acfb830ad334ca9a4a00b17b9f23f7398c839bf3772f106944077a29405cfc92d18d966ea3dc2f6564137789d4026833cd10f79efa3bce6f39814bba651ae5c1a89cd5a56ecab4044e13b8c70277f2510513d44f0bb7c3b301a1c89231be42707fac14dc39b938a33813fa0430ed7c6e3d16b0ff1d33b8f6c9c24569fe619f218d3af5c711bf4b404b3b58b36e98195b92a3cb79dbba9e9df30b60a5730ad120a8f6d35074b16428e2f3d48633a730cdfe455c2d1b925d9ff2ece89f508bd6300974e3ce8ded18474a3939b94f37f9b89df549d36feee1b898fc5b5c6b9140027bbf93ed69e5ae353bf457990c4afecab68a253052052e8082694285e5d39041340f7a77e2b0447c9118d7e6a5ee167b305aeee6dbc2ac929822985897a858900b1eb9aead9ec91b7b191923d463a098685dcb96ed3ea1d660431530644bb541e872e0138ba75055ea1db5c91aeeb088239f2cce9a51a02e6682eb4730ef1200bf821f4a5695d4f4d41df70649643aa55ba2097eabcd95722ea3681efd926eb25d003b4117c1bfdda71896a977788c5df8581236ca46b74ed0021b80cb04fbe0a773085144c9f4ea1b32e2fc6ec979736c003ba960d9ecf33e0d79550b5671909480c38cf7fba3d35a69423f5047a690e758dc926ef95987937267c766aafee1e4ddd15f91639d96728809b730539c3d698ee81d68295033f041f7c6959970216ac20cce92324c46ff943bd3db9bd0c1c488e8e820e1b25b74733cbd5c88fe70f835580c97180e279ea22f0107503f615266b41d73bcaffe63ba9d7724596dd1d93a5e11820fb164cde9a6e84da52e56b238629a2e27b8dab716cd0800f5f740e01b5250e8820f42c82d5c8c1a21031e3c2a69cd12f1c9eb3bd66a272c646730bc0377e179a09f89e80dfb17c305a09c158466bcf6c99ea0ba344e73177b82200028b7b1f5c5240f92eeeb00ae06352aa85b7f64862240d7b5567d2fd93e54a0ef977324e79735baa7be2185fd8a6a82b763137095a3be7ca1d5e51f75122ed20780be33d1b5f1f8b7cc0c040ba4abfc4c856e5045a3a84d28fc92170998e6c1cf9b75ba56bf13274a226aaed7a76761396dc9cd80d95252b72fecf0032ba2d1b5b8019b5c6229dd9a8f969f679e3a2d1df1ba3dfe9ed86d4146a3e96e19f0619bd48d7c62054093eafcc28ff7950cf90275aaae7c645e87cb5d5ae2d9083df181f1195d67a8574a3b69ee80878bdfc4e6f99b1efa29e4a2557411dc43f68b82fe658ced6bbfd68765e8e3990397fe4cb234f6d44ecf731c0bf1a9f297870e60936d1f5d83a7dc68e43af3c48aec0408113d8410864b9593ace6c9924d431c412e3ee0b1e262eb42f3548a28702b3b072bcf85dd9c5489970208c74d0a954521f86098da12deee3fd8fd7bd11f5e5286a6d464565dbe5f36ad14334ec195ee0"
        );

        bool res = testVerify.verify(proof);
        console.log(res);
    }
}
